$(document).ready(function(){$("body").on("click","li[data-lp]",function(o){var t=$(this);t.parent().children().index(t)<=t.siblings().length-3||setTimeout(function(){if(t&&!t.closest(".sinesp-popover-modalC").length){var o=t.get(0).offsetTop;if(o<window.scrollY)o=t.closest(".collapse").get(0).offsetTop,$("html, body").stop().animate({scrollTop:o},"500","swing",function(){})}},1e3)}),$("body").on("click",".sinesp-dropdown > button, .sinesp-dropdown > a",function(o){util.sinespDropdown(this,o)}),$("body").on("click",".sinesp-popover",function(o){o.stopPropagation()}),$("body").on("click",".sinesp-collapse-control",function(){util.sinespCollapseControl(this)}),$("body").on("click",".sinesp-simple-collapse-control",function(){util.sinespSimpleCollapseControl(this)}),$(document).on("scroll",function(){0!=window.scrollY?$("#ctrlt-backToTop").fadeIn("slow"):$("#ctrlt-backToTop").hide()}),$("#ctrlt-backToTop").on("click",function(){$("html, body").stop().animate({scrollTop:0},"500","swing",function(){})}),$("body").on("click",".sinesp-counter-content span",function(){var o=$(this).parent();o.hasClass("active")?o.removeClass("active"):($(".sinesp-counter-content").removeClass("active"),o.addClass("active"))}),$("body").on("click",".alert span.glyphicon-remove",function(){$(this).closest(".alert").hide()}),$("#searchContainer").on("click","#tabAdvancedSearch a",function(o){o.preventDefault(),$(this).tab("show")})});var util={sumCallLoader:0,sinespDropdown:function(o,t){var i=$(o).parent(),e=$(o).next(),s=$(".sinesp-dropdown-menu"),a=$(".sinesp-dropdown");if("open"===i.attr("data-active"))return i.attr("data-active",""),void e.hide();s.hide(),a.attr("data-active",""),"right"===i.attr("data-pos")&&i.attr("data-pos-value")?e.css({right:i.attr("data-pos-value")+"px"}):"left"===i.attr("data-pos")&&i.attr("data-pos-value")&&e.css({left:i.attr("data-pos-value")+"px"}),e.show(),i.attr("data-active","open"),t.preventDefault(),setTimeout(function(){$("body").one("click",function(){s.hide(),a.attr("data-active","")})},0),t.stopPropagation()},sinespCollapseControl:function(o){$(o).hasClass("collapsed")?($(o).find("span.icon-set").removeClass("icon-plus").addClass("icon-minus"),$("#lbl-"+$(o).closest("div").attr("id")).addClass("active")):($(o).find("span.icon-set").removeClass("icon-minus").addClass("icon-plus"),$("#lbl-"+$(o).closest("div").attr("id")).removeClass("active"))},sinespSimpleCollapseControl:function(o){$(o).hasClass("collapsed")?$(o).find("span.icon-set").removeClass("icon-plus").addClass("icon-minus"):$(o).find("span.icon-set").removeClass("icon-minus").addClass("icon-plus")},modalBlock:null,modalD:null,modalC:null,modalH:null,popOver:function(o,t,i){if($(t).addClass("sinesp-popover-modalC"),o&&""!=o||(o="Detalhes"),i)var e=$(i);else if($(t.parentNode).hasClass("list"))e=$(t).prev();else e=$(t.parentNode);var s=e.children(".row").first().children("div").first(),a=e.children(".row").first().children("div").first().next();"undefined"==a&&(a=s,console.log("R2 não está definido!"));var l,n,d,r,c,p,m=s.html();$("body").append("<div id='modalBlock'></div><div id='modalD'>"+m+"</div><div id='modalH'>"+o+"<span aria-hidden='true' class='glyphicon glyphicon-remove'></span></div>"),this.modalC=$(t),this.modalD=$("#modalD"),this.modalH=$("#modalH"),this.modalBlock=$("#modalBlock"),this.modalBlock.css("height",$(document).height()+"px"),l=s.position().left-10,d=s.position().top,r=s.width(),p=s.offset().top-1,c=e.find(".row").width();var h=0;330<(n=a.position().left)-l+1?(h=n-l+1-330,n=l+330-1):n-l+1<125&&(n=l+125-1),this.modalD.css({left:l+"px",top:p-15+"px",width:n-l+1+"px"}),(r=c-r-15)<330&&(r=330),this.modalC.css({left:n+"px",top:p+"px",width:r+h+"px"});var u=$(window).scrollTop(),f=$(window).height();if(this.modalC.css({height:f-40-30+"px",top:u+20+30+"px"}),this.modalH.css({position:"absolute",top:u+20+"px",left:n+"px",width:r+h+"px",margin:"0","border-radius":"8px 8px 0 0"}),d<u+60){var v=u-e.outerHeight()-100;$("html, body").stop().animate({scrollTop:v},"500",function(){util.modalC.css({top:u-100-e.outerHeight()+20+30+"px"}),util.modalH.css({top:u-100-e.outerHeight()+20+"px"}),util.showPopOver(),util.defineContentHeight()})}else if(f<d-u+100){v=u+e.outerHeight()+100;$("html, body").stop().animate({scrollTop:v},"500",function(){util.modalC.css({top:u+100+e.outerHeight()+20+30+"px"}),util.modalH.css({top:u+100+e.outerHeight()+20+"px"}),util.showPopOver(),util.defineContentHeight()})}else util.showPopOver(),util.defineContentHeight();var C=util.modalD;C.find("p").html("<span>"+C.find("p").text()+"</span>"),60<C.find("p span").text().length&&(C.find("p").attr("title",C.find("p span").text()),C.find("p span").html(this.shorten(C.find("p span").text())),C.find("p span").height()>C.find("p").height()+10&&C.find("p").html(this.shorten(C.find("p span").text(),55))),this.modalBlock.one("click",function(){util.hidePopOver()}),$("#modalH span").one("click",function(){util.hidePopOver()})},popOverSubEl:function(o,t){var i=document.getElementById(o),e=document.getElementById(t);this.popOver(e.getAttribute("title"),e,i)},showPopOver:function(){this.modalBlock.show(),this.modalD.show(),this.modalH.show(),this.modalC.show()},hidePopOver:function(){this.modalBlock.remove(),this.modalD.remove(),this.modalH.remove(),this.modalC.hide()},defineContentHeight:function(){var o=0;this.modalC.children().each(function(){o+=$(this).height()});var t=$(window).height();if(t<o+25&&(o=t-90),this.modalH.offset().top+o<this.modalD.offset().top+this.modalD.height()){var i=this.modalD.offset().top+this.modalD.height()-(this.modalH.offset().top+o);this.modalH.css({top:this.modalH.offset().top+i+"px"}),this.modalC.css({top:this.modalC.offset().top+i+"px"})}this.modalC.css({height:o+25+"px",visibility:"visible"}),this.modalH.css({visibility:"visible"})},shorten:function(o,t){return null==t&&(t=60),o.length>t&&(o=o.substr(0,t-3)+"&hellip;"),o},showLoader:function(o){"string"==typeof o?$("#"+o).addClass("serviceLoader"):"object"==typeof o?$(o).addClass("serviceLoader"):(this.sumCallLoader++,$("#serviceBlock").css("height",$(document).height()+"px").show(),$("#serviceLoader").show())},hideLoader:function(){$(".serviceLoader").removeClass("serviceLoader"),this.sumCallLoader--,this.sumCallLoader<=0&&($("#serviceBlock").hide(),$("#serviceLoader").hide())},initLoader:function(){this.sumCallLoader=0,this.showLoader()},alert:function(o,t,i){var e="Alerta",s="modal-sm";void 0!==t&&(e=t),void 0!==i&&(s=i),$("#modalAlert").remove(),$("body").append('<div id="modalAlert" class="modal" tabindex="-1" role="dialog"><div class="modal-dialog '+s+'"><div class="modal-content"><div class="modal-header"><button id="modalAlertDismissIcon" type="button" class="close" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title">'+e+'</h4></div><div class="modal-body"><p>'+o+'</p></div><div class="modal-footer"><button id="modalAlertDismissButton" type="button" class="btn btn-primary">Ok</button></div></div></div></div>'),$("#modalAlert").modal("show"),$("#modalAlertDismissIcon, #modalAlertDismissButton").off(),$("#modalAlertDismissIcon, #modalAlertDismissButton").on("click",function(){$("#modalAlert").modal("hide")})},generateModalConfirm:function(o,t){var i=$.Deferred();return $("#modalConfirm").remove(),$("body").append('<div id="modalConfirm" class="modal" tabindex="-1" role="dialog"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button id="modalConfirmDismissIcon" type="button" class="close" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title">Confirmação</h4></div><div class="modal-body"><p>'+o+"</p>"+(null!=t?t:"")+'</div><div class="modal-footer"><button id="modalConfirmDismissButton" type="button" class="btn btn-default">Cancelar</button><button id="modalConfirmAndCloseButton" type="button" class="btn btn-primary">Confirmar</button></div></div></div></div>'),$("#modalConfirm").modal("show"),$("#modalConfirmDismissIcon, #modalConfirmDismissButton, #modalConfirmAndCloseButton").off(),$("#modalConfirmDismissIcon, #modalConfirmDismissButton").on("click",function(o){o.stopPropagation(),$("#modalConfirm").modal("hide"),i.reject()}),i},confirm:function(o){var t=util.generateModalConfirm(o);return $("#modalConfirmAndCloseButton").on("click",function(o){o.stopPropagation(),$("#modalConfirm").modal("hide"),t.resolve()}),t.promise()},confirmWithOptions:function(o,t){for(var i='<div class="modal-options">',e=0;e<t.length;e++)i=i+'<div class="radio"><label><input type="radio" name="opt-modal-confirm" value='+e+" "+(0===e?"checked":"")+">"+t[e]+"</label></div>";i+="</div>";var s=util.generateModalConfirm(o,i);return $("#modalConfirmAndCloseButton").on("click",function(o){var t=$("input[name=opt-modal-confirm]:checked").val();o.stopPropagation(),$("#modalConfirm").modal("hide"),s.resolve(t)}),s.promise()},confirmWithMultipleOptions:function(o,t){for(var i='<div class="modal-options">',e=0;e<t.length;e++)i=i+'<div class="checkbox"><label><input type="checkbox" class="chk-options-confirm" value='+e+" "+(0===e?"checked":"")+">"+t[e]+"</label></div>";i+="</div>";var s=util.generateModalConfirm(o,i);return $("#modalConfirmAndCloseButton").on("click",function(o){var t=$(".chk-options-confirm:checked").map(function(){return $(this).val()}).get();o.stopPropagation(),$("#modalConfirm").modal("hide"),s.resolve(t)}),s.promise()},confirmWithJustification:function(o,t){var i='</br><div class="form-group"><label>'+t+'</label><textarea id="tx-modal-motivo-rejeicao" class="form-control" rows="4" maxlength="255"/></div>',e=util.generateModalConfirm(o,i);return $("#modalConfirmAndCloseButton").on("click",function(o){var t=$("#tx-modal-motivo-rejeicao").val();o.stopPropagation(),$("#modalConfirm").modal("hide"),e.resolve(t)}),e.promise()},openWindow:function(o,t){var i=window.open(o,t);i&&!i.closed&&void 0!==i.closed||util.alert('<br />Para acesso ao relatório é necessário desabilitar esta função e clicar novamente <br />na opção <img src="img/report/report-2.png"/> <span style="color:#3a7eaf;font-weight:bold;">Gerar Relatório</span>.',"Atenção! Bloqueador de pop-ups está ativo","modal-md")},openWindowCheckPopupBlocker:function(o,t,i){var e=window.open(o,t);if(!e||e.closed||void 0===e.closed){var s="Atenção! Bloqueador de pop-ups está ativo",a="Por favor, desative o bloqueador de pop-ups do browser.";null!=i&&("title"in i&&(s=i.title),"msg"in i&&(a=i.msg)),util.alert(a,s,"modal-md")}}};