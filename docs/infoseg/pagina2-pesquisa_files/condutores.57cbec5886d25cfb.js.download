var Condutores={indicePagCondutores:[],consultarCondutoresOk:function(o,a,e,i,r,t,s){Funcoes.consoleLogResult("consultarCondutoresOk",o,a,e);var n=document.getElementById(i+"-lista"),c=document.getElementById(i+"-lista-conteudo");if(null===c?((n=document.createElement("div")).setAttribute("id",i+"-lista"),n.setAttribute("class","collapse in"),(c=document.createElement("div")).setAttribute("id",i+"-lista-conteudo"),c.setAttribute("class","list"),n.appendChild(c)):$(c).empty(),!0===o.success){if(null!=o.payload&&0<o.payload.length){0!=t&&(Counters.counterAdd(i,COD_SERVICO.SRV_CONDUTORES,o.totalRegistros),Condutores.indicePagCondutores[i]=[],Condutores.indicePagCondutores[i].push(0));var u=Condutores.indicePagCondutores[i];-1===u.indexOf(o.ultimoRegistro)&&u.push(o.ultimoRegistro);for(var d=0;d<o.payload.length;d++){var l=i+"-"+d,m=o.payload[d];Condutores.gerarDadosBasicosCondutores(c,m,l),Condutores.gerarDadosDetalhados(c,m,l),Condutores.realizarBuscaListaFotosCondutores(m.numeroRegistro,l)}Report.showOrHideCheckboxAll(i)}}else gerarMensagemInsucesso(c,o.msgRetorno);$("#"+i).append(n),t?Condutores.paginar(i,r,o.totalRegistros,s,Condutores.consultarCondutoresOk):Funcoes.mudarAtivacaoPaginacao(i,!0)},gerarDadosBasicosCondutores:function(o,a,e){var i=document.createElement("div");i.setAttribute("id",e),Report.checkbox(i,a.numeroFormularioRenach,COD_SERVICO.SRV_CONDUTORES,a);var r=Condutores.dadosBasicosCondutor(a,!1);$(i).append(r),$(o).append(i),$(i).find(".row:eq(0)").find("div").first().find("p").on("click",function(){util.popOverSubEl(i.id,i.id+"-detalhe")})},reportItem:function(o,a,e){var i=document.createElement("div");i.setAttribute("id",e);var r=Condutores.dadosBasicosCondutor(a,!0);$(i).append(r),$(o).append(i),null!=a.numeroFormularioRenach&&$(i).find(".row:eq(0)").find("div").first().find("p").on("click",function(){Condutores.realizarBuscaDetalhesCondutoresParaAdicionarNoRelatorio(a.numeroFormularioRenach,i)})},reportItemDetalhe:function(o,a,e){var i=document.createElement("div");i.setAttribute("id",e);var r=Condutores.dadosDetalheCondutor(a,!0);r=(r=r+'<div class="reportDetails"><h5>Documento</h5>'+Condutores.dadosDocumentoCondutor(a)+"</div>")+'<div class="reportDetails"><h5>Cursos</h5>'+Condutores.dadosCursosCondutor(a)+"</div>",null!=a.quantidadeOcorrenciasImpedimentos&&0<a.quantidadeOcorrenciasImpedimentos&&(r=r+'<div class="list reportDetails"><h5>Ocorrências</h5>'+Condutores.dadosOcorrenciasCondutor(a)+"</div>"),null!=a.cnhs&&Condutores.gerarFotosCondutorRelatorio(i,a.cnhs),$(i).prepend(r),$(o).append(i)},gerarFotosCondutorRelatorio:function(o,a){if(0<a.length){var e=urlServico+"/infoseg2-service-condutores/api/condutores",i=document.createElement("div");i.setAttribute("class","row reportPhotos");for(var r=0;r<a.length;r++){var t=$("<div class='col-md-3'><div><img src="+e+"/fotos/"+a[r].numeroFormularioRenach+"/"+a[r].id+" onError=\"this.onerror=null;this.src='img/carousel/foto_background.png';\" /></div><div><img src="+e+"/assinaturas/"+a[r].numeroFormularioRenach+"/"+a[r].id+" onError=\"this.onerror=null;this.src='img/carousel/assinatura_background.png';\" /></div>NaN");$(i).append(t)}$(o).append(i)}},gerarDadosDetalhados:function(o,a,e){var i=document.createElement("div");i.setAttribute("id",e+"-detalhe"),i.setAttribute("hidden",""),i.setAttribute("title","RENACH"),Report.checkboxDetails(i,a.numeroFormularioRenach,COD_SERVICO.SRV_CONDUTORES,a);var r=Condutores.dadosDetalheCondutor(a,!1),t=Condutores.dadosDocumentoCondutor(a),s=Condutores.dadosCursosCondutor(a),n=Condutores.dadosOcorrenciasCondutor(a),c="tab-"+e+"-detalhesCondutor",u="tab-"+e+"-documentoCondutor",d="tab-"+e+"-cursosCondutor",l="tab-"+e+"-ocorrenciasCondutor",m='<div><ul id="ul-tab-det-'+e+'" class="nav nav-tabs"><li class="active"><a data-toggle="tab" href="#'+c+'">Detalhes</a></li><li><a data-toggle="tab" href="#'+u+'">Documento</a></li><li><a data-toggle="tab" href="#'+d+'">Cursos</a></li><li><a data-toggle="tab" href="#'+l+'">Ocorrências<span class="cnt-badge">'+(null!=a.quantidadeOcorrenciasImpedimentos?a.quantidadeOcorrenciasImpedimentos:0)+'</span></a></li></ul><div id="ul-tab-det-content-'+e+'" class="tab-content"><div id="'+c+'" class="tab-pane fade in active">'+r+'</div><div id="'+u+'" class="tab-pane fade in">'+t+'</div><div id="'+d+'" class="tab-pane fade in">'+s+'</div><div id="'+l+'" class="tab-pane fade in list">'+n+"</div></div><div>";$(i).append(m),$(o).append(i)},dadosBasicosCondutor:function(o,a){return linhaResult("4","Nome",o.nome,"","3","Filiação",Funcoes.filiacao(o.nomeMae,o.nomePai,a),"","2","CPF",a?formatarCpf(o.cpf):Funcoes.link(formatarCpf(o.cpf)),"","1","D. N.",o.dataNascimento,"Data de Nascimento","1","Categoria",NI(o.categoriaAtual),"","1","UF",NI(o.ufHabilitacaoAtual),"")},dadosDetalheCondutor:function(o,a){var e=colunasResult("4","Nome",o.nome,"","4","Mãe",a?NI(o.nomeMae):Funcoes.linkGenitora(NI(o.nomeMae)),"","4","CPF",a?formatarCpf(o.cpf):Funcoes.link(formatarCpf(o.cpf)),"","4","D. N.",NI(o.dataNascimento),"Data de Nascimento","4","Pai",a?NI(o.nomePai):Funcoes.linkGenitor(NI(o.nomePai)),"","4","Sexo",NI(o.descricaoSexo),"","4","Naturalidade",NI(o.descricaoLocalidadeNascimento),"","4","Nacionalidade",NI(o.descricaoNacionalidade),"","4","Restrições Médicas",NI(o.restricoesMedicas),"","4","Endereço, nº",NI(o.enderecoLogradouro)+", "+NI(o.enderecoNumero),"","4","Complemento",NI(o.enderecoComplemento),"","4","Bairro",NI(o.enderecoBairro),"","4","Município - UF",NI(o.descricaoEnderecoMunicipio)+" - "+NI(o.enderecoUf),"","4","CEP",NI(o.enderecoCep),"","4","Formulário PID - UF",NI(o.numeroFormularioPid)+" - "+NI(o.ufExpedicaoPid),"","4","Formulário CNH PID",NI(o.numeroFormularioCnhBasePid),"");return NuloOuVazio(o.descricaoMotivoRequerimentoPid1)||(e+=colunasResult("4","Motivo Requerimento Pid 1",o.descricaoMotivoRequerimentoPid1,"")),NuloOuVazio(o.descricaoMotivoRequerimentoPid2)||(e+=colunasResult("4","Motivo Requerimento Pid 2",o.descricaoMotivoRequerimentoPid2,"")),NuloOuVazio(o.descricaoMotivoRequerimentoPid3)||(e+=colunasResult("4","Motivo Requerimento Pid 3",o.descricaoMotivoRequerimentoPid3,"")),NuloOuVazio(o.descricaoMotivoRequerimentoPid4)||(e+=colunasResult("4","Motivo Requerimento Pid 4",o.descricaoMotivoRequerimentoPid4,"")),e+=colunasResult("4","Habilitação Estrangeira",NI(o.identificacaoHabilitacaoEstrangeira),"","4","Validade PID",NI(o.dataValidadePid),"","4","Origem Habilitação Estrangeira",NI(o.descricaoPaisOrigemHabilitacaoEstrangeira),"","4","Situação PID",NI(o.situacaoPid),"","4","Registro Nacional Estrangeiro",NI(o.registroNacionalEstrangeiro),"","4","Situação CNH",NI(o.descricaoSituacaoCnh),"","4","Situação CNH anterior",NI(o.descricaoSituacaoCnhAnterior),"","4","Permissionário",NI(o.permissionário),"","4","UF Solicitante Transferência",NI(o.ufSolicitanteTransferencia),""),resultDiv(e)},dadosDocumentoCondutor:function(o){var a=colunasResult("4","Documento",NI(o.descricaoDocumento)+" - "+NI(o.numeroDocumento),"","4","Categoria",NI(o.categoriaAtual),"","4","Órgão Emissor/UF",o.orgaoExpedidorDocumento+" / "+o.ufExpedidorDocumento,"","4","UF Domínio",NI(o.ufDominio),"","4","RENACH",NI(o.numeroFormularioRenach),"","4","Número Registro",NI(o.numeroRegistro),"","4","Número PGU",NI(o.numeroPgu),"","4","Validade CNH",NI(o.dataValidadeCnh),"","4","Situação CNH",NI(o.descricaoSituacaoCnh),"","4","UF Habilitação Atual",NI(o.ufHabilitacaoAtual),"","4","1&ordf; Habilitação",NI(o.dataPrimeiraHabilitacao)+" - "+NI(o.ufPrimeiraHabilitacao),"","4","Quadro Observações CNH",NI(o.quadroObservacoesCnh),"");return NuloOuVazio(o.descricaoMotivoRequerimento1)||(a+=colunasResult("4","Motivo Requerimento 1",o.descricaoMotivoRequerimento1,"")),NuloOuVazio(o.descricaoMotivoRequerimento2)||(a+=colunasResult("4","Motivo Requerimento 2",o.descricaoMotivoRequerimento2,"")),NuloOuVazio(o.descricaoMotivoRequerimento3)||(a+=colunasResult("4","Motivo Requerimento 3",o.descricaoMotivoRequerimento3,"")),NuloOuVazio(o.descricaoMotivoRequerimento4)||(a+=colunasResult("4","Motivo Requerimento 4",o.descricaoMotivoRequerimento4,"")),a+=colunasResult("4","Cancelamento",NI(o.cancelamento),"","4","Categoria Autorizada",NI(o.categoriaAutorizada),"","4","Categoria Rebaixada",NI(o.categoriaRebaixada),"","4","Data Cadastramento",NI(o.dataCadastramento),""),resultDiv(a)},dadosCursosCondutor:function(o){return linhaResult("4","Data Renovação CNH",NI(o.dataCursoAtualizacaoRenovacaoCnh),"","4","Data Reciclagem Infrator",NI(o.dataCursoReciclagemInfrator),"","4","Data Curso TCI",NI(o.dataCursoTci),"","4","Data Curso TCP",NI(o.dataCursoTcp),"","4","Data Curso TE",NI(o.dataCursoTe),"","4","Data Curso TMF",NI(o.dataCursoTmf),"","4","Data Curso TMT",NI(o.dataCursoTmt),"","4","Data Curso TPP",NI(o.dataCursoTpp),"","4","Data Curso TVE",NI(o.dataCursoTve),"","4","Última Atualização",NI(o.dataTransacaoUltimaAtualizacao),"","4","Última Emissão Histórico",NI(o.dataUltimaEmissaoHistorico),"","4","Validade Habilitação Estrangeira",NI(o.dataValidadeHabilitacaoEstrangeira),"","4","Classificação Curso TCI - UF",NI(o.descricaoClassificacaoCursoTci)+" - "+NI(o.ufCursoTci),"","4","Classificação Curso TCP - UF",NI(o.descricaoClassificacaoCursoTcp)+" - "+NI(o.ufCursoTcp),"","4","Classificação Curso TE- UF",NI(o.descricaoClassificacaoCursoTe)+" - "+NI(o.ufCursoTe),"","4","Classificação Curso TMF- UF",NI(o.descricaoClassificacaoCursoTmf)+" - "+NI(o.ufCursoTmf),"","4","Classificação Curso TMT- UF",NI(o.descricaoClassificacaoCursoTmt)+" - "+NI(o.ufCursoTmt),"","4","Classificação Curso TPP- UF",NI(o.descricaoClassificacaoCursoTpp)+" - "+NI(o.ufCursoTpp),"","4","Classificação Curso TVE- UF",NI(o.descricaoClassificacaoCursoTve)+" - "+NI(o.ufCursoTve),"","4","Curso Atualização Renovação CNH - UF",NI(o.descricaoModalidadeCursoAtualizacaoRenovacaoCnh)+" - "+NI(o.ufCursoAtualizacaoRenovacaoCnh),"","4","Curso Reciclagem Infrator - UF",NI(o.descricaoModalidadeCursoReciclagemInfrator)+" - "+NI(o.ufCursoReciclagemInfrator),"")},dadosOcorrenciasCondutor:function(o){if(null!=o.ocorrencias&&0<o.ocorrencias.length){for(var a=linhaResult("4","Qtd Ocorrências Impedimentos",NI(o.quantidadeOcorrenciasImpedimentos),""),e=0;e<o.ocorrencias.length;e++)a+=linhaResult("4","Data Impedimento Bloqueio",NI(o.ocorrencias[e].dataImpedimentoBloqueio),"","4","Início Impedimento Bloqueio",NI(o.ocorrencias[e].dataInicioImpedimentoBloqueio),"","4","Término Impedimento Bloqueio",NI(o.ocorrencias[e].dataTerminoImpedimentoBloqueio),"","4","Bloqueio",NI(o.ocorrencias[e].decricaoBloqueio),"","4","Decisão Bloqueio",NI(o.ocorrencias[e].descricaoDecisaoBloqueio),"","4","Motivo Impedimento Bloqueio",NI(o.ocorrencias[e].descricaoMotivoImpedimentoBloqueio),"","4","Prazo Bloqueio",NI(o.ocorrencias[e].descricaoPrazoBloqueio),"","4","Prazo Total Bloqueio",NI(o.ocorrencias[e].descricaoPrazoTotalBloqueio),"","4","Requisitos Liberação Bloqueio",NI(o.ocorrencias[e].requisitosLiberacaoBloqueio),"","4","Motivo Impedimento Bloqueio",NI(o.ocorrencias[e].motivoImpedimentoBloqueio),"","4","Órgão Responsável Impedimento Bloqueio",NI(o.ocorrencias[e].orgaoResponsavelImpedimentoBloqueio),"","4","Prazo Penal Bloqueio",NI(o.ocorrencias[e].prazoPenalBloqueio)+" - "+NI(o.ocorrencias[e].tipoPrazoPenalBloqueio),"","4","Prazo Penal Total Bloqueio",NI(o.ocorrencias[e].prazoPenalTotalBloqueio),"","4","Recolhimento Cnh Bloqueada",NI(o.ocorrencias[e].recolhimentoCnhBloqueada),"","4","UF Detran Bloqueio",NI(o.ocorrencias[e].ufDetranBloqueio),"");return a}return"Nenhuma ocorrência de impedimento"},paginar:function(i,r,o,t,s){var a=$("<div id='"+i+"-pag'/>");$("#"+i+"-lista-conteudo").after(a),1<o&&($("#"+i+"-pag").attr("totalpaginas",o),$(a).bootpag({total:o,page:1,maxVisible:1,leaps:!1}).on("page",function(o,a){o.preventDefault();var e=Condutores.indicePagCondutores[i];e.length>a-1&&(Funcoes.mudarAtivacaoPaginacao(i,!1),r.ultimoRegistro=e[a-1],genericRequest(t,r,s,i,!1))}))},realizarBuscaListaFotosCondutores:function(o,a){var e={numeroRegistro:o};genericRequest(CondutoresProxy.getFotosCondutor,e,Condutores.consultarListaFotosCondutoresOk,a)},realizarBuscaDetalhesCondutoresParaAdicionarNoRelatorio:function(a,e){util.confirm("Confirma a inclusão do detalhamento do item no relatório?").done(function(){var o={numeroRenach:a};genericRequest(CondutoresProxy.getCondutoresPorRENACH,o,Condutores.consultarDetalhesCondutoresParaAdicionarNoRelatorioOk,e.id)}).fail()},consultarDetalhesCondutoresParaAdicionarNoRelatorioOk:function(o,a,e,i){Report.adicionaDetalhamentoItem(o,i,COD_SERVICO.SRV_CONDUTORES,"numeroFormularioRenach")},consultarListaFotosCondutoresOk:function(o,a,e,i){!0===o.success&&null!=o.payload&&0<o.payload.length&&Condutores.criarCarousel(i,o.payload)},criarCarousel:function(o,a){if(null!=a&&0<a.length){var e=urlServico+"/infoseg2-service-condutores/api/condutores",i='<div id="'+o+'-carousel" class="carousel slide " data-ride="carousel">';i+='<div class="carousel-inner" role="listbox">';for(var r=0;r<a.length;r++)i+=0===r?'<div class="item active"><span class="lazy-load-foto"><img class="img-responsive center-block" src="'+e+"/fotos/"+a[r].numeroFormularioRenach+"/"+a[r].id+'" onError="this.onerror=null;this.src=\'img/carousel/foto_background.png\';"></span><span class="lazy-load-assinatura"><img class="img-responsive center-block" src="'+e+"/assinaturas/"+a[r].numeroFormularioRenach+"/"+a[r].id+'" onError="this.onerror=null;this.src=\'img/carousel/assinatura_background.png\';"></span></div>':'<div class="item"><span class="lazy-load-foto"><img class="img-responsive center-block" data-lazy-load-src="'+e+"/fotos/"+a[r].numeroFormularioRenach+"/"+a[r].id+'" onError="this.onerror=null;this.src=\'img/carousel/foto_background.png\';"></span><span class="lazy-load-assinatura"><img class="img-responsive center-block" data-lazy-load-src="'+e+"/assinaturas/"+a[r].numeroFormularioRenach+"/"+a[r].id+'" onError="this.onerror=null;this.src=\'img/carousel/assinatura_background.png\';"></span></div>';i+="</div>",1<a.length&&(i+='<a class="left carousel-control" href="#'+o+'-carousel" data-slide="prev"><span class="glyphicon glyphicon-chevron-left"></span></a><a class="right carousel-control" href="#'+o+'-carousel" data-slide="next"><span class="glyphicon glyphicon-chevron-right"></span></a>'),i+="</div>",$("#tab-"+o+"-detalhesCondutor").prepend('<div class="sinesp-popover-photo-carousel">'+i+"</div>"),$("#"+o+"-carousel").carousel({interval:!1});var t=0;$("#"+o+"-carousel").on("slide.bs.carousel",function(o){$activeItem=$(".active.item",this),0===t&&(t=$(this).height(),$activeItem.next(".item").height(t)),$(o.relatedTarget).find("img").each(function(){var o=$(this).data("lazy-load-src");void 0!==o&&""!==o&&($(this).attr("src",o),$(this).data("lazy-load-src",""))})})}}};