function consultarListaPessoaFisicaFiltroOk(a,e,o,i){var t=[];if(a.success){if(Filtro.limparListagemConteudo(i),null!=a.payload&&0<a.payload.length){$("#"+i).data("registros",a.payload);for(var s=$("#"+i+"-nome").val(),r=$("#"+i+"-cpf").val(),n=$("#"+i+"-nomeMae").val(),l=$("#"+i+"-dataNascimento").val(),c=$("#"+i+"-municipio").val(),d=document.getElementById(i+"-uf"),u=0<d.selectedIndex?d.options[d.selectedIndex].value:"",p=0;p<a.payload.length;p++)Filtro.filtrarString(s,a.payload[p].nome)&&Filtro.filtrarString(r,formatarCpf(a.payload[p].cpf))&&Filtro.filtrarString(n,a.payload[p].nomeMae)&&Filtro.filtrarString(l,a.payload[p].dataNascimento)&&Filtro.filtrarString(c,a.payload[p].municipio)&&Filtro.filtrarString(u,a.payload[p].uf)&&t.push(a.payload[p]);0<t.length&&Filtro.paginarRegistrosFiltrados(i,10,t,gerarDadosBasicosPessoaFisica),Report.showOrHideCheckboxAll(i)}Filtro.mostrarMensagemFiltro(i,a.msgRetorno,t.length)}else Filtro.mostrarMensagemFiltroInsucesso(i,a.msgRetorno)}function consultarListaPessoaFisicaOk(a,e,o,i,t,s){Funcoes.consoleLogResult("consultarListaPessoaFisicaOk",a,e,o);var r=document.getElementById(i+"-lista-conteudo");if(null===r?(criarEstruturaListagemResultados(i),r=document.getElementById(i+"-lista-conteudo")):$(r).empty(),a.success){if(null!=a.payload&&0<a.payload.length){0!=s&&($("#"+i).data("parameters",t),Counters.counterAdd(i,COD_SERVICO.SRV_PESSOAFISICA,a.totalRegistros));for(var n=0;n<a.payload.length;n++){var l=i+"-"+n;gerarDadosBasicosPessoaFisica(r,a.payload[n],l,!1)}Report.showOrHideCheckboxAll(i)}}else gerarMensagemInsucesso(r,a.msgRetorno);if(s){10<a.totalRegistros&&Filtro.gerarBotaoDeFiltro(i,gerarFormularioDeFiltroDePessoaFisica,COD_SERVICO.SRV_PESSOAFISICA,a.totalRegistros),paginarListagemResultados(i,t,a.totalRegistros,PessoaFisicaProxy.getListaPessoaFisica,consultarListaPessoaFisicaOk,10)}}function consultarPessoaFisicaOk(a,e,o,i){Funcoes.consoleLogResult("consultarPessoaFisicaOk",a,e,o);var t=document.createElement("div");if(t.setAttribute("id",i+"-lista"),t.setAttribute("class","list collapse in"),!0===a.success){if(null!=a.payload){Counters.counterInc(i,COD_SERVICO.SRV_PESSOAFISICA);var s=i+"-0";gerarDadosBasicosPessoaFisica(t,a.payload,s,!0),gerarDadosDetalhePessoaFisica(t,a.payload,s)}}else gerarMensagemInsucesso(t,a.msgRetorno);$("#"+i).append(t)}function gerarDadosBasicosPessoaFisica(a,e,o,i){var t=document.createElement("div");t.setAttribute("id",o),Report.checkbox(t,formatarCpf(e.cpf),COD_SERVICO.SRV_PESSOAFISICA,e);var s=dadosBasicosPessoaFisica(e,!1);$(t).append(s),$(a).append(t),i?$(t).find(".row:eq(0)").find("div").first().find("p").on("click",function(){util.popOverSubEl(t.id,t.id+"-detalhe")}):$(t).find(".row:eq(0)").find("div").first().find("p").on("click",function(){realizarBuscaDetalhesPessoaFisica(e.cpf,t)})}function gerarDadosDetalhePessoaFisica(a,e,o){var i=document.createElement("div");i.setAttribute("id",o+"-detalhe"),i.setAttribute("hidden",""),i.setAttribute("title","Detalhes da Pessoa Física"),Report.checkboxDetails(i,formatarCpf(e.cpf),COD_SERVICO.SRV_PESSOAFISICA,e);var t=dadosDetalhadosPessoaFisica(e,!1);t=resultDiv(t),$(i).append(t),$(a).append(i)}function reportItemPessoaFisica(a,e,o){var i=document.createElement("div");i.setAttribute("id",o);var t=dadosBasicosPessoaFisica(e,!0);$(i).append(t),$(a).append(i),$(i).find(".row:eq(0)").find("div").first().find("p").on("click",function(){realizarBuscaDetalhesPessoaFisicaParaAdicionarNoRelatorio(e.cpf,i)})}function reportItemDetalhePessoaFisica(a,e,o){var i=document.createElement("div");i.setAttribute("id",o);var t=colunasResult("4","Nome",e.nome,"");t+=dadosDetalhadosPessoaFisica(e,!0),t=resultDiv(t),$(i).append(t),$(a).append(i)}function dadosBasicosPessoaFisica(a,e){return linhaResult("3","Nome",a.nome,"","3","Mãe",e?NI(a.nomeMae):Funcoes.linkGenitora(NI(a.nomeMae)),"","2","CPF",e?formatarCpf(a.cpf):Funcoes.link(formatarCpf(a.cpf)),"","1","D. N.",""==a.dataNascimento?NI(a.dataNascimentoApo):a.dataNascimento,"Data de Nascimento","3","Município - UF",NI(a.municipio)+" - "+NI(a.uf),"")}function dadosDetalhadosPessoaFisica(a,e){var o=colunasResult("4","Mãe",e?NI(a.nomeMae):Funcoes.linkGenitora(NI(a.nomeMae)),"","4","CPF",e?formatarCpf(a.cpf):Funcoes.link(formatarCpf(a.cpf)),"","4","D. N.",""==a.dataNascimento?NI(a.dataNascimentoApo):a.dataNascimento,"Data de Nascimento","4","Data Últ. Atualização",NI(a.dataAlteracaoOrigem),"Data da última atualização","4","Título de Eleitor",NI(a.tituloEleitor),"","4","Sexo",NI(a.sexo),"","4","Ano do Óbito",NI(a.anoObito),"","4","Situação Cadastral",a.situacaoCadastral,"");null!==a.residenteExterior&&"RESIDENTE"==a.residenteExterior.toUpperCase()?o+=colunasResult("4","Residente no exterior",NI(a.residenteExterior),"","4","Código e País",a.codigoPaisExterior+" - "+a.paisExterior,"Código e nome do País, caso seja residente no exterior"):o+=colunasResult("4","Residente no exterior",NI(a.residenteExterior),"","4","Código e País","N/I","");var i=(NuloOuVazio(a.logradouro)?"":a.logradouro+" ")+(NuloOuVazio(a.endereco)?"":a.endereco+" ")+(NuloOuVazio(a.numero)?"":a.numero+" ")+(NuloOuVazio(a.complemento)?"":", "+a.complemento),t=Funcoes.formatarTelefone(a.ddd,a.telefone);return o+=colunasResult("4","Código Ocupação",NI(a.codigoNaturezaOcupacao),"Código da Natureza da Ocupação","4","Código Ocupação principal",NI(a.codigoOcupacaoPrincipal),"","4","Exercício natureza da ocupação e código ocupação principal",NI(a.anoExercicioOcupacao),"Exercício a que se referem o código da natureza da ocupação e código da ocupação principal","4","Endereço",NI(i),"","4","Município - UF",NI(a.municipio)+" - "+NI(a.uf),"","4","CEP",Funcoes.formatarCep(a.cep),"","4","Telefone",t,"","4","Unidade Administrativa",NI(a.unidadeAdministrativa),"","4","Indicativo de Estrangeiro",NI(a.estrangeiro),"")}function realizarBuscaDetalhesPessoaFisica(a,e){var o={cpf:formatarCpf(a)};genericRequest(PessoaFisicaProxy.getPessoaFisica,o,consultarDetalhesPessoaFisicaOk,e.id)}function realizarBuscaDetalhesPessoaFisicaParaAdicionarNoRelatorio(e,o){util.confirm("Confirma a inclusão do detalhamento do item no relatório?").done(function(){var a={cpf:formatarCpf(e)};genericRequest(PessoaFisicaProxy.getPessoaFisica,a,consultarDetalhesPessoaFisicaParaAdicionarNoRelatorioOk,o.id)}).fail()}function consultarDetalhesPessoaFisicaParaAdicionarNoRelatorioOk(a,e,o,i){var t=document.getElementById(i);!0===a.success?null!=a.payload&&($(t).find(".row:eq(0)").find("div").first().find("p").off("click"),t.setAttribute("data-servico",COD_SERVICO.SRV_PESSOAFISICA),t.setAttribute("data-key",formatarCpf(a.payload.cpf)),t.setAttribute("data-tipo","R"),t.setAttribute("data-parent-id",i),$(t).data("payload",a.payload),Report.addItemReport(t)):gerarMensagemInsucesso(t,a.msgRetorno)}function consultarDetalhesPessoaFisicaOk(a,e,o,i){var t=document.getElementById(i),s=$(t).parent();!0===a.success?null!=a.payload&&(gerarDadosDetalhePessoaFisica(s,a.payload,i),$(t).find(".row:eq(0)").find("div").first().find("p").off("click"),$(t).find(".row:eq(0)").find("div").first().find("p").on("click",function(){util.popOverSubEl(t.id,t.id+"-detalhe")}),util.popOverSubEl(i,i+"-detalhe")):gerarMensagemInsucesso(t,a.msgRetorno)}function gerarFormularioDeFiltroDePessoaFisica(a,e){$(e).off("click");var o=$("<div class='sinesp-dropdown-menu sinesp-popover text-left'><form id='frm-"+a+"' class='form frm-filtro-pessoafisica' novalidate><input type='hidden' value='"+a+"' name='chave'/><div class='row sinesp-filter-row-small'><div class='col-md-12'><div class='form-group'><label>Nome</label><input type='text' class='form-control' id='"+a+"-nome' maxlength='100' /></div><div class='form-group'><label>Mãe</label><input type='text' class='form-control' id='"+a+"-nomeMae' maxlength='100' /></div><div class='form-group'><label>Data de Nascimento</label><input type='text' class='form-control' id='"+a+"-dataNascimento' maxlength='10'  onkeypress='return Funcoes.isDataDigitada(event)'/></div><div class='form-group'><label>CPF</label><input type='text' class='form-control' id='"+a+"-cpf' maxlength='11'  onkeypress='return Funcoes.isNumeroDigitado(event)'/></div><div class='form-group'><label>Município</label><input type='text' class='form-control' id='"+a+"-municipio' maxlength='100' /></div><div class='form-group'><label>UF</label><select class='form-control' id='"+a+"-uf'>"+Funcoes.carregarListaUfs()+"</select></div><div class='form-group text-right'><button id='"+a+"-btn-limpar-formulario' class='btn btn-primary' type='button' onclick='Filtro.limparFormulario(this.form)'>Limpar</span></button>&nbsp;&nbsp;&nbsp;<button id='"+a+"-btn-filtrar-pesquisa' type='submit' class='btn btn-primary' >Filtrar &nbsp; <span class='glyphicon glyphicon-search'></span></button></div></div></div></form></div>");$("#"+a+"-lista-filtro").append(o)}$(function(){$("body").on("submit",".frm-filtro-pessoafisica",function(a){Filtro.tratarSubmit(a,this,PessoaFisicaProxy.getListaPessoaFisicaFiltro,consultarListaPessoaFisicaFiltroOk)})});