var Mandados={consultarFiltro:function(a,o,e,t){var n=[];if(!0===a.success){if(Filtro.limparListagemConteudo(t),null!=a.payload&&0<a.payload.length){$("#"+t).data("registros",a.payload);var r=[{filtro:t+"-pessoa",campo:"pessoa"},{filtro:t+"-genitora",campo:"genitora"},{filtro:t+"-dataNascimento",campo:"dataNascimento"},{filtro:t+"-numeroMandado",campo:"numeroMandado"},{filtro:t+"-siglaOrgao",campo:"siglaOrgao"}];0<(n=Filtro.filtrarRegistros(r,a.payload)).length&&Filtro.paginarRegistrosFiltrados(t,10,n,Mandados.gerarDadosBasicosLista),Report.showOrHideCheckboxAll(t)}Filtro.mostrarMensagemFiltro(t,a.msgRetorno,n.length)}else Filtro.mostrarMensagemFiltroInsucesso(t,a.msgRetorno)},consultarLista:function(a,o,e,t,n,r){Funcoes.consoleLogResult("Mandados.consultarLista",a,o,e);var i=document.getElementById(t+"-lista-conteudo");if(null===i?(criarEstruturaListagemResultados(t),i=document.getElementById(t+"-lista-conteudo")):$(i).empty(),!0===a.success){if(null!=a.payload){0!=r&&($("#"+t).data("parameters",n),Counters.counterAdd(t,COD_SERVICO.SRV_MANDADOS,a.totalRegistros));for(var d=0;d<a.payload.length;d++){var s=t+"-"+d;Mandados.gerarDadosBasicosLista(i,a.payload[d],s)}Report.showOrHideCheckboxAll(t)}}else gerarMensagemInsucesso(i,a.msgRetorno);if(r){10<a.totalRegistros&&Filtro.gerarBotaoDeFiltro(t,Mandados.gerarFormularioDeFiltro,COD_SERVICO.SRV_MANDADOS,a.totalRegistros),paginarListagemResultados(t,n,a.totalRegistros,MandadosProxy.getMandados,Mandados.consultarLista,10)}},consultar:function(a,o,e,t){var n=document.createElement("div");if(n.setAttribute("id",t+"-lista"),n.setAttribute("class","list collapse in"),!0===a.success){if(null!=a.payload){var r=t+"-0";Mandados.gerarDadosBasicos(n,a.payload,r),Mandados.gerarDadosDetalhados(n,a.payload,r),Counters.counterInc(t,COD_SERVICO.SRV_MANDADOS)}}else gerarMensagemInsucesso(n,a.msgRetorno);$("#"+t).append(n)},consultarDetalhe:function(a,o,e,t){var n=document.getElementById(t),r=$(n).parent();!0===a.success?null!=a.payload&&(Mandados.gerarDadosDetalhados(r,a.payload,t),$(n).find(".row:eq(0)").find("div").first().find("p").off("click"),$(n).find(".row:eq(0)").find("div").first().find("p").on("click",function(){util.popOverSubEl(t,t+"-detalhe")}),util.popOverSubEl(t,t+"-detalhe")):gerarMensagemInsucesso(n,a.msgRetorno)},gerarDadosBasicosLista:function(a,o,e){var t=document.createElement("div");t.setAttribute("id",e),Report.checkbox(t,o.numeroMandado,COD_SERVICO.SRV_MANDADOS,o);var n=Mandados.dadosBasicos(o,!1);$(t).append(n),$(a).append(t),$(t).find(".row:eq(0)").find("div").first().find("p").on("click",function(){Mandados.realizarBuscaPorMandadoEspecifico(o.numeroMandado,t)})},gerarDadosBasicos:function(a,o,e){var t=document.createElement("div");t.setAttribute("id",e),Report.checkbox(t,o.numeroMandado,COD_SERVICO.SRV_MANDADOS,o);var n=Mandados.dadosBasicos(o,!1);$(t).append(n),$(a).append(t),$(t).find(".row:eq(0)").find("div").first().find("p").on("click",function(){util.popOverSubEl(t.id,t.id+"-detalhe")})},gerarDadosDetalhados:function(a,o,e){var t=document.createElement("div");t.setAttribute("hidden",""),t.setAttribute("id",e+"-detalhe"),t.setAttribute("title","Detalhes do Mandado"),Report.checkboxDetails(t,o.numeroMandado,COD_SERVICO.SRV_MANDADOS,o);var n=Mandados.dadosDetalhe(o,!1);$(t).append(n),$(a).append(t)},reportItem:function(a,o,e){var t=document.createElement("div");t.setAttribute("id",e),null==o.nome?(o.pessoa,o.siglaOrgao):(o.nome,o.expedidor);var n=Mandados.dadosBasicos(o,!0);$(t).append(n),$(a).append(t),$(t).find(".row:eq(0)").find("div").first().find("p").on("click",function(){Mandados.realizarBuscaDetalhesParaAdicionarNoRelatorio(o.numeroMandado,t)})},reportItemDetalhe:function(a,o,e){var t=document.createElement("div");t.setAttribute("id",e);var n=Mandados.dadosDetalhe(o,!0);$(t).append(n),$(a).append(t)},dadosBasicos:function(a,o){var e,t,n;return n=null==a.nome?(e=a.pessoa,t=a.siglaOrgao,"Sigla do Órgão"):(e=a.nome,t=a.expedidor,"Expedidor"),linhaResult("3","Nome do Réu",e,"","3","Mãe",o?NI(a.genitora):Funcoes.linkGenitora(NI(a.genitora)),"","1","D. N.",NI(a.dataNascimento),"Data de Nascimento","3","N&ordm; Mandado",a.numeroMandado,"","2",n,t,"")},dadosDetalhe:function(a,o){var e=o?colunasResult("4","Nome do Réu",a.nome,""):"";return e+=colunasResult("4","Alcunha",NI(a.alcunha),"",o?"4":"8","Mãe",o?NI(a.genitora):Funcoes.linkGenitora(NI(a.genitora)),"","4","D. N.",NI(a.nascimento),"","4","Nacionalidade",NI(a.nacionalidade),"","4","Situação",a.situacao,"","4","N&ordm; Mandado",a.numeroMandado,"","4","Data Mandado",NI(a.dataMandado),"","4","Validade",a.dataValidade,"",o?"4":"8","Expedidor",a.expedidor,"","4","Assunto Delito Alvará",NI(a.assuntoDelitoAlvara),"","4","Data Delito",NI(a.dataDelito),"","4","Assunto",NI(a.assunto2),"","4","Motivo",a.motivo,"","4","Prazo",NI(a.prazo),"","4","Recaptura",a.recaptura,""),resultDiv(e)},realizarBuscaPorMandadoEspecifico:function(a,o){var e={numeroMandado:a};genericRequest(MandadosProxy.getMandado,e,Mandados.consultarDetalhe,o.id)},realizarBuscaDetalhesParaAdicionarNoRelatorio:function(o,e){util.confirm("Confirma a inclusão do detalhamento do item no relatório?").done(function(){var a={numeroMandado:o};genericRequest(MandadosProxy.getMandado,a,Mandados.consultarDetalhesParaAdicionarNoRelatorio,e.id)}).fail()},consultarDetalhesParaAdicionarNoRelatorio:function(a,o,e,t){Report.adicionaDetalhamentoItem(a,t,COD_SERVICO.SRV_MANDADOS,"numeroMandado")},gerarFormularioDeFiltro:function(a,o){$(o).off("click");var e=$("<div class='sinesp-dropdown-menu sinesp-popover text-left'><form id='frm-"+a+"' class='form frm-filtro-mandados' novalidate><input type='hidden' value='"+a+"' name='chave'/><div class='row sinesp-filter-row-small'><div class='col-md-12'><div class='form-group'><label>Nome do Réu</label><input type='text' class='form-control' id='"+a+"-pessoa' maxlength='100' /></div><div class='form-group'><label>Mãe</label><input type='text' class='form-control' id='"+a+"-genitora' maxlength='100' /></div><div class='form-group'><label>Data de Nascimento</label><input type='text' class='form-control' id='"+a+"-dataNascimento' maxlength='10'  onkeypress='return Funcoes.isDataDigitada(event)'/></div><div class='form-group'><label>Número do Mandado</label><input type='text' class='form-control' id='"+a+"-numeroMandado' maxlength='50'  onkeypress='return Funcoes.isNumeroDigitado(event)'/></div><div class='form-group'><label>Sigla do Órgão</label><input type='text' class='form-control' id='"+a+"-siglaOrgao' maxlength='6' /></div><div class='form-group text-right'><button id='"+a+"-btn-limpar-formulario' class='btn btn-primary' type='button' onclick='Filtro.limparFormulario(this.form)'>Limpar</span></button>&nbsp;&nbsp;&nbsp;<button id='"+a+"-btn-filtrar-pesquisa' type='submit' class='btn btn-primary' >Filtrar &nbsp; <span class='glyphicon glyphicon-search'></span></button></div></div></div></form></div>");$("#"+a+"-lista-filtro").append(e)}};$(function(){$("body").on("submit",".frm-filtro-mandados",function(a){Filtro.tratarSubmit(a,this,MandadosProxy.getMandadosFiltro,Mandados.consultarFiltro)})});